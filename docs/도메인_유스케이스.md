<aside>
💡

**!!!주의 사항!!!**

유스케이스 명세 문서는 모든 기획 책임자가 회의를 진행하거나 혹은 동의가 있을 때만 수정 가능합니다.

단독 수정을 무조건 금지합니다

</aside>

## 도메인

---

### 가게 관리

- **점주는 가게를 생성할 수 있다**
    - 가게 생성은 가게 이름, 위치, 상세 설명, 대표 이미지, **`대학 이름`**, 테이블 점유비(시간 단위,비용)의 정보로 생성할 수 있다.
    - 가게 이름, 위치, 대표 이미지, 대학 이름, 테이블 비용은 필수 값이다. → 위치 중복 여부 검증?
    - **추후 `한 계정 당 한 개만 생성`**
    - **`추후 대학 축제 기간에 따라 보여지는 기간 설정 가능하게`**
- **점주는 가게를 수정할 수 있다**
    - 가게 생성은 가게 이름, 위치, 상세 설명, 대표 이미지, 대학 이름, 테이블 점유비(시간 단위,비용)의 정보로 수정할 수 있다.
- **`점주는 가게를 삭제할 수 있다` → 프론트 미구현**
- **점주는 가게 상세 이미지를 등록할 수 있다**
- **점주는 가게 상세 이미지를 삭제할 수 있다**
- **~~점주는 자신의 가게 리스트를 조회 할 수 있다~~**
- **등록된 가게 리스트를 메인 페이지에서 조회 할 수 있다**
- **특정 가게의 상세 정보를 조회 할 수 있다.**

### 가게 테이블 관리

- **추후 `테이블 추가` 버튼 → 클릭 시 모달이 떠서 `수용인원 설정` 및 `테이블비 지정`**
    - 가게마다 테이블 추가 버튼은 커스텀할 수 있다
- **점주는 가게의 테이블을 생성할 수 있다.**
    - 가게 생성시 테이블 번호, 테이블 위치(2차원 좌표), 테이블 수용 인원으로 생성할 수 있다
    - 테이블 번호는 가게마다 고유해야한다. → 테이블 번호의 필요성?
    - 테이블 생성은 가게가 마감 상태이어야 한다.
- **점주는 가게의 테이블을 수정할 수 있다.**
    - 가게 생성시 테이블 번호, 테이블 위치(2차원 좌표), 테이블 수용 인원으로 수정할 수 있다
    - 테이블 수정은 가게가 마감 상태이어야 한다.
- **점주는 가게의 테이블을 삭제할 수 있다**
    - 테이블 삭제는 가게가 마감 상태이어야 한다.
- **점주는 가게의 테이블 리스트를 조회할 수 있다**

### 가게 메뉴 관리

- **메뉴**
    - **점주는 메뉴를 생성할 수 있다.**
        - 메뉴 생성 시 {메뉴 이름, 가격, 설명, 대표이미지, 품절 여부, 추천 여부}의 정보로 생성할 수 있다.
        - 메뉴 이름, 가격, 품절 여부, 추천 여부는 필수값이다.
        - 메뉴 생성은 가게가 마감 상태이어야한다.
        - **`카테고리 설정 시, 카테고리가 없는 경우 등록 버튼 추가` → 프론트**
    - **점주는 메뉴 세부 정보를 수정할 수 있다.**
        - 메뉴 수정 시 {메뉴 이름, 가격, 설명, 대표이미지, 품절 여부, 추천 여부}의 정보로 수정할 수 있다.
        - 메뉴 수정은 가게가 마감 상태이어야한다.
    - **`점주는 메뉴 순서를 수정할 수 있다.` → 프론트 미구현**
        - 메뉴 순서 수정은 가게가 마감 상태이어야한다.
    - **`점주는 영업 중에 메뉴 추천 여부를 수정할 수 있다.`**
        - 백엔드 : api 분리해야할 수도?
    - **점주는 메뉴 품절 여부를 수정할 수 있다.**
    - **점주는 메뉴를 삭제할 수 있다.**
        - 메뉴 삭제는 가게가 마감 상태이어야 한다.
    - **가게의 메뉴 리스트를 조회할 수 있다.**
    - **가게 메뉴 상세정보를 조회할 수 있다.**
    - **카테고리 별 메뉴 리스트를 조회할 수 있다.**
- **메뉴 카테고리**
    - **점주는 카테고리를 생성할 수 있다.**
        - 카테고리 생성 시 {카테고리 이름}의 정보로 생성할 수 있다.
        - 카테고리 이름은 필수값이다.
        - 카테고리 생성은 가게가 마감 상태이어야한다.
    - **점주는 카테고리 세부정보를 수정할 수 있다.**
        - 카테고리 세부정보 수정은 가게가 마감 상태이어야한다.
    - **`점주는 카테고리 순서를 수정할 수 있다.` → 프론트**
        - 카테고리 순서 수정은 가게가 마감 상태이어야한다.
    - **점주는 카테고리를 삭제할 수 있다.**
        - 카테고리 삭제는 가게가 마감 상태이어야한다.
        - `카테고리에 메뉴가 존재하면 카테고리 삭제가 안되도록 구현해야함` 백,프 둘 다
    - **가게별 카테고리 리스트를 조회할 수 있다.**

### 가게 영업 관리

- **점주는 가게의 영업을 시작할 수 있다.**
    - 가게의 마감 상태이어야 영업을 시작할 수 있다
- **점주는 가게의 영업 마감을 할 수 있다**
    - 가게가 오픈 상태이어야 영업을 마감할 수 있다.
    - 가게에 미정산 영수증이 존재하면 마감할 수 없다
- **점주는 가게별 영업 리스트를 조회할 수 있다.**
- **`영업 시작한 지 24시간 지났으면 팝업 띄우기`**

### 장바구니

- **고객은 장바구니에 메뉴를 추가할 수 있다.**
    - 메뉴 추가 시 {메뉴 id, 메뉴 수량}의 정보로 추가할 수 있다.
- **고객은 장바구니에 메뉴를 삭제할 수 있다.**
- **고객은 장바구니 정보를 조회할 수 있다.**

### 주문

- **고객은 장바구니에 담긴 메뉴를 가지고 주문을 생성할 수 있다.**
    - 주문 생성 시 {영수증 id}의 정보로 생성할 수 있다.
    - 장바구니를 삭제하지 않고 재활용해야한다.
- **점주는 개별 메뉴를 가지고 주문을 생성할 수 있다. (수동 주문)**
    - 주문 생성 시 {메뉴 id, 메뉴 수량}의 정보로 생성할 수 있다.
- **점주는 커스텀 주문을 생성할 수 있다.**
    - 커스텀 주문 생성 시 {주문 가격, 설명}의 정보로 생성할 수 있다.
    - 주문 가격, 설명은 필수값이다.
    - `“커스텀 주문" 명칭 수정 고민해야함`
    - **`커스텀 주문 완료 시 주문 내역에 보이도록 UI 구현`**
- **점주는 커스텀 주문을 수정할 수 있다.**
- **점주는 주문을 삭제할 수 있다.**
- **점주와 고객은 주문의 상태를 변환할 수 있다.**
    - 주문 상태 : 주문, 접수, 취소, 완료
        - 주문
            - **점주는 “주문” 상태를 접수, 취소 상태로 변환할 수 있다.
              → 주문이 접수 상태로 변경되면, 개별 주문 메뉴의 상태는 조리중으로 변환된다.**
            - **고객은 “주문” 상태를 취소 상태로 변환할 수 있다.**
        - 접수
            - **점주는 “접수” 상태를 취소 상태로 변환할 수 있다.**
        - 취소
            - **점주는 “취소” 상태를 접수 상태로 변환할 수 있다.**
        - 완료
            - **점주는 “완료” 상태를 취소, 접수 상태로 변환할 수 있다.**
- **`고객은 영수증의 리스트를 조회할 수 있다.`**
    - `아직 고객 로그인 기능이 없는데, 추가되면 더 테스트 필요`
- **점주는 영업별 주문 리스트를 조회할 수 있다.**
- **고객은 주문 상세정보를 조회할 수 있다.**

### 주문 메뉴

- **점주와 고객은 주문 `메뉴` 상태를 변환할 수 있다.**
    - 주문 메뉴 상태 : 주문, 조리중, 취소, 완료
        - 주문
            - **점주는 “주문” 상태를** **조리중, 취소, 완료 상태로 변환할 수 있다.**
            - **고객은 “주문” 상태를 취소 상태로 변환할 수 있다.**
        - 조리중
            - **점주는 “조리중” 상태를 취소, 완료 상태로 변환할 수 있다.**
        - 취소
            - **점주는 “취소” 상태를 조리중 상태로 변환할 수 있다.**
        - 완료
            - **점주는 “완료” 상태를 조리중 상태로 변환할 수 있다.
              → 모든 개별 주문 메뉴가 완료 또는 취소 상태가 되면, 주문의 상태는 완료로 변환된다.**
- **~~점주는 주문에 주문 메뉴를 추가할 수 있다.**
  → 필요할라나~~
- **~~점주는 주문에 주문 메뉴를 삭제할 수 있다.**
  → 주문 메뉴 상태를 취소로 변경하는 것으로 퉁칠 수 없나~~
- **~~점주는 주문 메뉴의 수량을 수정할 수 있다.**
  → 조리가 들어갔을 메뉴인데, 수량 수정..?~~
- **점주는 주문 메뉴의 조리완료 수량을 수정할 수 있다.**

### 주문 영수증

- **고객은 QR 코드로 영수증을 발급 받을 수 있다.**
    - **테이블 별 미정산 영수증 id를 조회할 수 있다.**
    - **테이블에 해당하는 영수증을 생성할 수 있다.**
    - QR코드는 테이블과 매칭되어 있고 미정산 영수증이 있으면 해당 영수증 정보를 조회하고,
      없으면 새로 발급 받는다.
        - 참고) 주문 페이지는 영수증의 UUID를 내포하고 있어 정산 후 유효한 페이지가 아니다
    - 테이블을 활성화 시킨다.
- **영수증 세부정보 및 주문, 주문 메뉴를 조회할 수 있다.**
- **점주는 가게별 전체 테이블 미정산 영수증을 조회할 수 있다.**
- **점주는 가게 영업별 정산된 영수증 리스트를 조회할 수 있다.**
- **점주는 영수증 정산을 할 수 있다.**
    - **영수증의 테이블 점유 시간을 멈추고, 재시작 할 수 있다.**
    - **테이블 점유 시간을 멈춘 영수증을 정산 처리할 수 있다.**
- **점주는 본인 가게의 영수증을 삭제 할 수 있다.**
    - 정산 상태가 아니면 테이블 활성화 상태를 미점유로 변경한다.
- **고객은 자신의 영수증 리스트를 조회할 수 있다.**
    - 만들어져있는데, 삭제해야할 듯
- **점주는 한 테이블의 영수증을 다른 테이블로 옮길 수 있다.**
    - 이전 테이블과 이후 테이블 활성화 상태를 변경한다.

### 직원 호출

- **고객은 직원호출을 할 수 있다**
    - 고객은 자기가 점유한 활성화된 테이블과 정산되지 않는 영수증이어야 호출이 가능하다.
- **점주는 완료되지 않은 직원호출을 조회할 수 있다.**
- **점주는 직원 호출을 완료처리 할 수 있다**

### 관리자페이지

- 생성된 주막을 언제까지 띄울지, 혹은 어느 기간에만 띄울지 관리

### 리뷰 (deprecated)

**`리뷰, 합석 추후 결정`**

## 용어

| **한글**     | **영어**           | **의미**                                  |
|------------|------------------|-----------------------------------------|
| 점주         | Owner            | 가게 소유자                                  |
| 가게         | Store            | 비고                                      |
| 테이블 점유비    | OccupancyFee     | 테이블 총 점유 비용(시간 단위 X 비용)                 |
| 테이블 시간 단위  | TableTime        | 테이블 시간 단위                               |
| 테이블 비용     | TableCost        | 테이블 비용                                  |
| 상세 이미지     | StoreDetailImage | 가게 상세 이미지                               |
| 메뉴         | Menu             | 가게의 음식 메뉴                               |
| 메뉴 카테고리    | MenuCategory     | 음식별 범주                                  |
| 유저         | User             | 야밤 플랫폼을 이용하는 일반 유저(익명 or 회원)            |
| 고객         | Cusotmer         | 테이블을 점유를 한 유저                           |
| 영수증        | Receipt          | 고객이 테이블을 점유하고부터 점유해제까지  주문한 내역의 단위      |
| 정산/미정산 영수증 | AdjustReceipt    | 영수증의 정산여부 (정산 완료면 고객의 점유는 해제된다)         |
| 주문         | Order            | 고객의 주문 단위                               |
| 주문 메뉴      | OrderMenu        | 주문의 메뉴들, 주문한 음식 내역의 최소 단위               |
| 커스텀 주문     | CustomOrder      | 영수증에 반영될 주문 중 메뉴 외에  사유가 있는 주문(ex. 서비스) |
| 호출         | Call             | 고객이 점유하고 있는 가게의 점주에게하는 직원 호출            |
| 주문 상태      | OrderStatus      | 고객이 진행한 주문의 진행 상태                       |
| 주문 메뉴 상태   | OrderMenuStatus  | 주문 단위 내부에 개별의 메뉴들의 진행 상태                |

